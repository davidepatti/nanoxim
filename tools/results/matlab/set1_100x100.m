% fname: out_matlab/set1_100x100.m
% ../nanoxim -dimx 100 -dimy 100  -disr -cyclelinks 3 -bootstrap center -bootstrap_immunity -bootstrap_timeout 10000 

function [node_coverage, link_coverage, nsegments, avg_seg_length, latency] = set1_100x100(symbol)

data = [
% defective_nodes  node_coverage  link_coverage      nsegments avg_seg_length        latency
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
                0         0.9973       0.996212           3721        2.68019           4713
             0.05         0.9429       0.893939           2741        3.43999           5455
             0.05         0.9458       0.895101           3044         3.1071           6276
             0.05         0.9456       0.895152           2822        3.35082           9698
             0.05         0.9547       0.912374           3027        3.15395           7059
             0.05         0.9468       0.897677           2918        3.24469           6333
             0.05         0.9456       0.894141           2655        3.56158           8302
             0.05         0.9499       0.901768           2664        3.56569           8545
             0.05          0.948       0.899646           2946        3.21792           7236
             0.05         0.9489       0.901212           2947        3.21988           7324
             0.05         0.9488       0.900859           2992        3.17112           7380
             0.05         0.9419       0.890657           2830        3.32827           7284
             0.05         0.9475       0.898182           2804         3.3791           6161
             0.05         0.9487       0.901465           2771        3.42367           7263
             0.05         0.9495       0.902626           2552        3.72061           8014
             0.05         0.9525       0.907929           2970        3.20707           6923
             0.05         0.9416       0.895455           2851         3.3027           6611
             0.05         0.9468       0.896667           2800        3.38143           6357
             0.05         0.9475       0.901616           2810        3.37189           6609
             0.05         0.9396       0.891263           2798        3.35811           7071
             0.05           0.95       0.902929           2842        3.34272           6393
              0.1         0.8882       0.796061           2535        3.50375           8902
              0.1         0.8953        0.80702           2595         3.4501          10745
              0.1         0.8888       0.797424           2644        3.36157           8157
              0.1         0.8993       0.813737           2620        3.43244           7100
              0.1         0.8902            0.8           2507        3.55086           7829
              0.1         0.8945       0.807172           2633        3.39727           7548
              0.1         0.9014       0.817525           2826        3.18967           7762
              0.1         0.9016       0.818232           2613        3.45044           7337
              0.1         0.8897       0.802677           2584        3.44311           7026
              0.1         0.8927       0.803384           2337        3.81985           9093
              0.1         0.0012    0.000858586              5            2.4           2333
              0.1         0.8879       0.798232           2454        3.61817           9187
              0.1         0.8957       0.808283           2547        3.51669           8403
              0.1         0.8988       0.812677           2602        3.45427          10139
              0.1         0.8939       0.805303           2451        3.64708           8603
              0.1         0.8886       0.800404           2505        3.54731           9417
              0.1          0.895       0.807475           2565        3.48928           8794
              0.1         0.8902       0.800253           2450        3.63347           7533
              0.1         0.8966       0.809949           2515        3.56501           8256
              0.1         0.8939       0.803485           2645        3.37958           8317
             0.15         0.8337       0.715101           2324        3.58735           8720
             0.15         0.8338       0.710707           2200           3.79          10787
             0.15         0.8295       0.708939           2326        3.56621          10006
             0.15          0.847       0.727626           2334        3.62896           9428
             0.15         0.8232       0.703434           2341        3.51645          10022
             0.15         0.8366       0.715303           2259        3.70341           9807
             0.15         0.8413       0.724242           2360        3.56483           8460
             0.15         0.8435       0.726869           2445         3.4499           9298
             0.15         0.8229       0.704141           2272        3.62192           8826
             0.15         0.8337       0.716869           2186        3.81382           8081
             0.15          0.836        0.71697           2431        3.43891           9353
             0.15         0.8346       0.715758           2253        3.70439          10008
             0.15         0.8299       0.708535           2203        3.76714           9782
             0.15         0.8414       0.727374           2288        3.67745           8206
             0.15         0.8316       0.707525           2329        3.57063           9248
             0.15          0.828       0.705101           2344        3.53242           9476
             0.15         0.8306       0.711616           2236        3.71467           9586
             0.15         0.8316       0.713788           2302        3.61251          10156
             0.15         0.8344       0.710707           2287        3.64845           9692
             0.15         0.8225       0.701919           2303        3.57143          10406
              0.2         0.7657       0.622323           2045        3.74425          10937
              0.2         0.7652       0.621212           1975        3.87443           9042
              0.2         0.7746       0.633535           2116        3.66068          10997
              0.2         0.7617        0.61798           2056        3.70477          10997
              0.2         0.5965       0.480859           1543        3.86585          10975
              0.2         0.0001              0              1              1              1
              0.2         0.7618       0.620657           2013         3.7844           9800
              0.2         0.7081           0.57           1874        3.77855          10999
              0.2         0.7243       0.585404           1921        3.77043          10964
              0.2         0.7399        0.59798           2026        3.65202          10976
              0.2         0.7616        0.61798           2029        3.75357          10669
              0.2         0.7063       0.569495           1878        3.76092          10914
              0.2         0.7647       0.622778           2065        3.70315          10143
              0.2         0.7465       0.603687           1896        3.93724          10939
              0.2         0.7188       0.580707           1920        3.74375          10757
              0.2         0.7687       0.624444           2038        3.77184          10699
              0.2         0.7663       0.623838           2025         3.7842           9938
              0.2         0.7247        0.59197           1938        3.73942          10993
              0.2         0.7647       0.622273           2065        3.70315          10998
              0.2         0.7162       0.580404           1863        3.84434          10999
             0.25         0.5548       0.426919           1393        3.98277          10999
             0.25         0.5747       0.448434           1539        3.73424          10958
             0.25         0.0001              0              1              1              1
             0.25          0.168       0.128081            431        3.89791          10999
             0.25         0.6792       0.526869           1754        3.87229          10968
             0.25         0.5806       0.449646           1579        3.67701          10540
             0.25         0.5823       0.448434           1518        3.83597          10998
             0.25         0.5645       0.434798           1426        3.95863          10998
             0.25         0.5389       0.417071           1370        3.93358          10999
             0.25         0.3456       0.263485            837        4.12903          10999
             0.25         0.5476       0.418687           1465        3.73788          10999
             0.25         0.6829       0.529192           1715        3.98192          10423
             0.25         0.3686       0.285505            942        3.91295          10999
             0.25         0.6061       0.465505           1529        3.96403          10999
             0.25         0.6479       0.503434           1613        4.01674          10999
             0.25         0.5949        0.46298           1573        3.78195          10999
             0.25          0.616        0.47601           1531        4.02351          10947
             0.25         0.6328        0.48303           1625        3.89415          10998
             0.25         0.6453       0.498081           1597         4.0407          10999
             0.25         0.6881       0.528838           1776        3.87444          10770
              0.3         0.2462       0.181212            597        4.12395          10677
              0.3         0.0868      0.0643434            216        4.01852          10999
              0.3         0.3879       0.288636            934         4.1531          10999
              0.3         0.2434       0.181061            619        3.93215          10998
              0.3         0.1642       0.121616            415        3.95663          10999
              0.3         0.0257      0.0185354             59        4.35593           5218
              0.3         0.0486      0.0369697            120           4.05          10782
              0.3         0.0012    0.000808081              4              3           2016
              0.3         0.1206      0.0885354            293        4.11604          10997
              0.3         0.1538       0.112374            380        4.04737          10999
              0.3         0.3792       0.278636            902        4.20399          10986
              0.3         0.3511       0.254899            816         4.3027          10998
              0.3          0.001    0.000656566              4            2.5           2298
              0.3         0.1085      0.0809091            273        3.97436          10718
              0.3         0.2723       0.203687            653        4.16998          10947
              0.3         0.0022     0.00166667              7        3.14286           2503
              0.3         0.1036      0.0775253            280            3.7          10727
              0.3         0.2823       0.207626            707        3.99293          10933
              0.3         0.0548      0.0393939            140        3.91429          10901
              0.3         0.0344       0.025303             84        4.09524           8995
             0.35         0.0238      0.0181313             64        3.71875           5505
             0.35          0.012     0.00883838             33        3.63636           6035
             0.35         0.0013    0.000858586              4           3.25           3358
             0.35         0.0036     0.00257576             11        3.27273           2749
             0.35         0.0018     0.00126263              6              3           2860
             0.35         0.0001              0              1              1              1
             0.35          0.002     0.00146465              7        2.85714           2055
             0.35          0.001    0.000606061              2              5           1040
             0.35         0.0139       0.010202             40          3.475           3411
             0.35         0.0111     0.00742424             25           4.44           3983
             0.35          0.002     0.00136364              6        3.33333           2813
             0.35         0.0671      0.0479293            163        4.11656           9327
             0.35         0.0143           0.01             36        3.97222           5582
             0.35         0.0113     0.00787879             25           4.52           3820
             0.35         0.0006    0.000353535              1              6           1023
             0.35         0.0055     0.00373737             15        3.66667           3430
             0.35         0.0729      0.0513131            179        4.07263          10745
             0.35         0.0036     0.00272727             15            2.4           3603
             0.35         0.0121     0.00883838             38        3.18421           7528
             0.35         0.1048      0.0754545            242        4.33058           8000
              0.4         0.0077     0.00585859             18        4.27778           4066
              0.4         0.0001              0              1              1              1
              0.4         0.0006    0.000353535              2              3           1024
              0.4         0.0226      0.0164646             58        3.89655           4304
              0.4         0.0015    0.000959596              4           3.75           1800
              0.4         0.0054     0.00353535             10            5.4           3430
              0.4         0.0011    0.000757576              4           2.75           1899
              0.4         0.0274      0.0188384             63        4.34921           8465
              0.4         0.0127     0.00853535             22        5.77273           5220
              0.4         0.0001              0              1              1              1
              0.4         0.0001              0              1              1              1
              0.4         0.0016     0.00106061              4              4           2872
              0.4         0.0015     0.00106061              4           3.75           2107
              0.4         0.0026     0.00186869              6        4.33333           1745
              0.4         0.0023     0.00151515              5            4.6           1985
              0.4         0.0031     0.00217172              8          3.875           4278
              0.4         0.0029      0.0019697              9        3.22222           3537
              0.4         0.0031     0.00222222              9        3.44444           2699
              0.4         0.0125     0.00893939             27        4.62963           5525
              0.4         0.0017     0.00121212              4           4.25           1889
             0.45         0.0001              0              1              1              1
             0.45         0.0008    0.000505051              2              4           1029
             0.45         0.0001              0              1              1              1
             0.45         0.0019     0.00131313              7        2.71429           3387
             0.45         0.0019     0.00131313              5            3.8           5078
             0.45         0.0051     0.00313131             11        4.63636           2507
             0.45         0.0074     0.00484848             15        4.93333           3615
             0.45         0.0039     0.00267677             13              3           2603
             0.45         0.0036     0.00232323              9              4           2885
             0.45         0.0004     0.00020202              1              4           1016
             0.45         0.0001              0              1              1              1
             0.45         0.0001              0              1              1              1
             0.45         0.0019     0.00126263              5            3.8           1240
             0.45         0.0016     0.00116162              6        2.66667           1187
             0.45         0.0019     0.00136364              6        3.16667           3621
             0.45          0.003     0.00212121             10              3           2807
             0.45         0.0011    0.000707071              3        3.66667           2675
             0.45         0.0007     0.00040404              1              7           1034
             0.45          0.001    0.000606061              2              5           1032
             0.45         0.0014    0.000959596              4            3.5           1918
              0.5         0.0019     0.00121212              3        6.33333           1532
              0.5         0.0018     0.00126263              4            4.5           1070
              0.5         0.0026     0.00186869             10            2.6           3244
              0.5         0.0001              0              1              1              1
              0.5         0.0001              0              1              1              1
              0.5         0.0026     0.00181818              5            5.2           3072
              0.5         0.0001              0              1              1              1
              0.5         0.0013    0.000858586              4           3.25           1941
              0.5         0.0006    0.000353535              2              3           1725
              0.5         0.0001              0              1              1              1
              0.5         0.0018     0.00116162              3              6           1120
              0.5         0.0008    0.000505051              2              4           1738
              0.5         0.0016      0.0010101              4              4           2757
              0.5         0.0008     0.00040404              1              8           1031
              0.5         0.0009    0.000555556              2            4.5           1902
              0.5         0.0011    0.000707071              3        3.66667           3641
              0.5          0.001    0.000656566              3        3.33333           1034
              0.5         0.0004     0.00020202              1              4           1016
              0.5         0.0022     0.00151515              6        3.66667           2435
              0.5         0.0001              0              1              1              1
];

rows = size(data, 1);
cols = size(data, 2);

node_coverage = [];
for i = 1:rows/20,
   ifirst = (i - 1) * 20 + 1;
   ilast  = ifirst + 20 - 1;
   tmp = data(ifirst:ilast, cols-5+1);
   avg = mean(tmp);
   [h sig ci] = ttest(tmp, 0.1);
   ci = (ci(2)-ci(1))/2;
   node_coverage = [node_coverage; data(ifirst, 1:cols-5), avg ci];
end

figure(1);
hold on;
title('Node Coverage')
plot(node_coverage(:,1), node_coverage(:,2), symbol);
ylim([0 1])
xlabel('Node Defect Rate')
ylabel('node_coverage')
x = [0:0.05:0.5]
y = 1-x
plot(x,y,'--r')
legend('DiSR','Ideal')

