% fname: out_matlab/set2_30x30.m
% ../nanoxim -dimx 30 -dimy 30  -disr -cyclelinks 3 -bootstrap center -bootstrap_immunity -bootstrap_timeout 900 

function [node_coverage, link_coverage, nsegments, avg_seg_length, latency] = set2_30x30(symbol)

data = [
% defective_nodes  node_coverage  link_coverage      nsegments avg_seg_length        latency
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
                0              1              1            339        2.65487           2358
             0.05           0.95       0.902874            293        2.91809           2504
             0.05       0.947778       0.900575            273        3.12454           2482
             0.05       0.913333       0.861494            281        2.92527           2403
             0.05       0.964444       0.932759            270        3.21481           2342
             0.05       0.943333       0.885057            290        2.92759           2521
             0.05       0.936667       0.892529            292        2.88699           2172
             0.05       0.953333        0.91092            287        2.98955           2056
             0.05       0.957778       0.918966            285        3.02456           2132
             0.05       0.955556       0.914943            245         3.5102           2132
             0.05       0.952222       0.906897            233        3.67811           2303
             0.05           0.96       0.923563            315        2.74286           2043
             0.05       0.948889       0.901724            257        3.32296           2310
             0.05       0.952222        0.90977            308        2.78247           2475
             0.05       0.955556        0.91954            303        2.83828           2288
             0.05       0.964444       0.928736            280            3.1           2108
             0.05       0.954444       0.912069            316        2.71835           2454
             0.05       0.954444       0.915517            279        3.07885           2322
             0.05       0.936667       0.877011            265        3.18113           2271
             0.05       0.943333       0.894253            288        2.94792           2144
             0.05           0.94       0.883908            263        3.21673           2560
              0.1       0.891111       0.798851            246        3.26016           2323
              0.1       0.902222       0.818391            258        3.14729           2529
              0.1       0.866667       0.762069            248        3.14516           2499
              0.1       0.902222       0.822414            239        3.39749           2605
              0.1       0.892222       0.795402            245        3.27755           2468
              0.1       0.895556        0.81092            242        3.33058           1909
              0.1       0.901111       0.818391            261        3.10728           2378
              0.1       0.883333       0.791379            239        3.32636           2804
              0.1       0.886667            0.8            240          3.325           3055
              0.1       0.908889       0.832759            256        3.19531           2786
              0.1       0.904444       0.824138            263        3.09506           2579
              0.1       0.886667       0.801149            256        3.11719           2080
              0.1           0.88       0.786207            241        3.28631           2154
              0.1       0.902222        0.82069            257        3.15953           2528
              0.1       0.902222       0.818966            239        3.39749           2778
              0.1       0.875556       0.783908            244        3.22951           3076
              0.1       0.857778       0.773563            214        3.60748           2341
              0.1       0.893333       0.807471            265        3.03396           2120
              0.1           0.87       0.783333            250          3.132           2548
              0.1           0.91       0.827011            250          3.276           2466
             0.15       0.807778       0.693678            229        3.17467           2393
             0.15       0.843333       0.718391            216        3.51389           2966
             0.15           0.84       0.721264            226        3.34513           2533
             0.15       0.815556       0.702874            211        3.47867           2443
             0.15       0.792222       0.682184            217        3.28571           2685
             0.15       0.805556       0.678736            201        3.60697           2843
             0.15       0.796667       0.681034            197        3.63959           3510
             0.15       0.787778       0.658621            207        3.42512           3243
             0.15       0.826667       0.717816            250          2.976           2664
             0.15       0.818889       0.700575            225        3.27556           2725
             0.15       0.616667       0.529885            180        3.08333           2097
             0.15       0.843333       0.732759            197        3.85279           2982
             0.15       0.732222       0.612644            193        3.41451           2359
             0.15       0.825556       0.700575            203         3.6601           4380
             0.15       0.822222       0.703448            211        3.50711           2892
             0.15       0.665556       0.556322            192        3.11979           3296
             0.15       0.787778        0.66954            219        3.23744           2564
             0.15       0.841111       0.735632            219        3.45662           2933
             0.15       0.778889           0.65            191        3.67016           3304
             0.15       0.431111       0.362644            141        2.75177           2240
              0.2       0.801111       0.662069            175           4.12           2984
              0.2       0.784444        0.64023            191        3.69634           2789
              0.2       0.687778       0.568391            201         3.0796           2887
              0.2      0.0133333      0.0091954              3              4           1921
              0.2       0.716667       0.577586            175        3.68571           2619
              0.2           0.63       0.512069            158        3.58861           4961
              0.2       0.662222       0.523563            160          3.725           3895
              0.2       0.777778        0.64023            188         3.7234           3318
              0.2       0.671111       0.545977            167        3.61677           3570
              0.2       0.698889       0.560345            197        3.19289           3573
              0.2       0.798889       0.674713            214        3.35981           3195
              0.2       0.592222       0.490805            151         3.5298           2915
              0.2       0.735556       0.610345            184        3.59783           2889
              0.2       0.788889       0.651149            192        3.69792           3058
              0.2       0.751111       0.617816            178        3.79775           2623
              0.2       0.745556       0.616092            202        3.32178           2747
              0.2     0.00666667     0.00402299              2              3           1024
              0.2       0.534444       0.455172            143        3.36364           3098
              0.2       0.672222       0.563793            174        3.47701           2445
              0.2       0.707778       0.593103            179        3.55866           3006
             0.25       0.414444       0.327586            122        3.05738           2942
             0.25       0.405556       0.312069             98        3.72449           3032
             0.25       0.433333       0.332759            112        3.48214           3884
             0.25       0.446667       0.356897            104        3.86538           2550
             0.25       0.523333        0.40977            129        3.65116           5185
             0.25       0.171111       0.131034             48        3.20833           2743
             0.25       0.588889       0.449425            142        3.73239           3692
             0.25       0.611111        0.48046            147         3.7415           3769
             0.25       0.464444        0.36092            112        3.73214           3131
             0.25       0.622222       0.482184            140              4           2990
             0.25       0.506667       0.407471            145        3.14483           3810
             0.25       0.704444       0.560345            161        3.93789           4089
             0.25       0.724444       0.578736            180        3.62222           3241
             0.25     0.00666667     0.00402299              1              6           1023
             0.25       0.717778       0.581609            182        3.54945           2762
             0.25       0.672222       0.528161            167        3.62275           2722
             0.25       0.563333       0.443103            147        3.44898           2939
             0.25           0.49       0.383908            129         3.4186           3965
             0.25       0.524444       0.398276            128         3.6875           3975
             0.25       0.394444       0.303448             83        4.27711           3224
              0.3     0.00444444     0.00229885              1              4           2815
              0.3       0.426667       0.324138            103        3.72816           3590
              0.3       0.335556       0.256897             72        4.19444           3017
              0.3      0.0144444      0.0103448              4           3.25           1757
              0.3      0.0322222      0.0258621             10            2.9           1357
              0.3       0.392222       0.295977             90        3.92222           3610
              0.3      0.0311111      0.0212644              7              4           2444
              0.3       0.522222       0.375287            112        4.19643           3892
              0.3       0.276667        0.20977             68        3.66176           3117
              0.3      0.0122222     0.00862069              3        3.66667           1473
              0.3       0.337778       0.244253             74        4.10811           3407
              0.3      0.0211111       0.016092              8          2.375           1470
              0.3           0.39       0.294253             86         4.0814           3438
              0.3       0.443333        0.33046            107        3.72897           2901
              0.3       0.226667       0.177586             54        3.77778           3308
              0.3       0.545556       0.397126            119        4.12605           2737
              0.3      0.0166667       0.012069              4           3.75           1654
              0.3       0.461111       0.351149            106        3.91509           3705
              0.3     0.00888889     0.00574713              2              4           2223
              0.3           0.44       0.333908             98        4.04082           2987
             0.35      0.0255556      0.0172414              4           5.75           1480
             0.35       0.106667      0.0775862             23        4.17391           3474
             0.35      0.0111111     0.00747126              4            2.5           1398
             0.35      0.0122222     0.00862069              3        3.66667           1813
             0.35           0.28       0.207471             66        3.81818           3723
             0.35       0.101111      0.0735632             17        5.35294           1964
             0.35      0.0122222     0.00804598              3        3.66667           1346
             0.35       0.264444       0.191954             61        3.90164           4642
             0.35       0.111111      0.0856322             34        2.94118           2065
             0.35      0.0688889           0.05             16          3.875           1972
             0.35      0.0133333      0.0091954              4              3           1718
             0.35      0.0388889      0.0281609             10            3.5           2083
             0.35           0.28       0.204598             62        4.06452           3386
             0.35      0.0233333      0.0178161              6            3.5           1749
             0.35      0.0455556      0.0333333             14        2.92857           1666
             0.35      0.0444444      0.0333333             14        2.85714           1463
             0.35      0.0577778      0.0408046             15        3.46667           2943
             0.35       0.262222        0.18908             63        3.74603           3005
             0.35      0.0111111     0.00747126              4            2.5           1773
             0.35       0.125556      0.0925287             25           4.52           2258
              0.4      0.0122222     0.00747126              3        3.66667           1038
              0.4      0.0355556      0.0247126              8              4           1788
              0.4           0.01     0.00632184              2            4.5           1042
              0.4       0.144444            0.1             28        4.64286           2796
              0.4      0.0255556      0.0183908              6        3.83333           1386
              0.4      0.0144444      0.0103448              5            2.6           1497
              0.4      0.0233333      0.0155172              3              7           2422
              0.4      0.0522222      0.0396552             11        4.27273           2177
              0.4      0.0155556     0.00977011              3        4.66667           1304
              0.4     0.00111111              0              1              1              1
              0.4     0.00444444     0.00229885              1              4           2815
              0.4       0.128889      0.0862069             18        6.44444           2610
              0.4     0.00666667     0.00402299              2              3           1281
              0.4       0.156667       0.104598             28        5.03571           1717
              0.4     0.00666667     0.00402299              2              3           1057
              0.4           0.01     0.00632184              1              9           1051
              0.4       0.118889      0.0896552             29        3.68966           1856
              0.4      0.0366667      0.0252874              8          4.125           2373
              0.4       0.224444       0.160345             46         4.3913           3229
              0.4       0.148889       0.105747             34        3.94118           2442
             0.45     0.00888889     0.00574713              2              4           1310
             0.45      0.0444444      0.0281609              9        4.44444           1409
             0.45      0.0166667      0.0109195              4           3.75           1117
             0.45     0.00444444     0.00229885              1              4           2815
             0.45      0.0111111     0.00747126              4            2.5           3105
             0.45      0.0188889      0.0126437              2            8.5           1546
             0.45      0.0255556      0.0172414              6        3.83333           2202
             0.45      0.0411111      0.0298851              9        4.11111           1962
             0.45      0.0111111     0.00747126              2              5           1062
             0.45     0.00666667     0.00402299              2              3           1233
             0.45     0.00111111              0              1              1              1
             0.45      0.0211111      0.0155172              5            3.8           1560
             0.45      0.0144444      0.0091954              3        4.33333           1295
             0.45       0.117778      0.0816092             26        4.07692           2991
             0.45     0.00444444     0.00229885              1              4           2815
             0.45           0.01     0.00632184              2            4.5           1417
             0.45      0.0133333     0.00862069              4              3           1052
             0.45     0.00444444     0.00229885              1              4           1015
             0.45      0.0144444      0.0103448              5            2.6           1502
             0.45      0.0388889      0.0287356             11        3.18182           1862
              0.5      0.0122222     0.00804598              3        3.66667           1045
              0.5      0.0188889      0.0114943              3        5.66667           1292
              0.5     0.00777778      0.0045977              1              7           1339
              0.5      0.0266667      0.0195402              7        3.42857           1329
              0.5      0.0255556       0.016092              5            4.6           1293
              0.5      0.0166667       0.012069              4           3.75           1728
              0.5           0.06      0.0396552             14        3.85714           1355
              0.5     0.00888889     0.00574713              2              4           1024
              0.5      0.0144444      0.0103448              3        4.33333           1293
              0.5     0.00888889     0.00574713              2              4           1268
              0.5      0.0111111     0.00747126              2              5           1038
              0.5     0.00666667     0.00402299              1              6           1024
              0.5      0.0155556      0.0114943              6        2.33333           1114
              0.5      0.0144444     0.00977011              3        4.33333           1052
              0.5     0.00777778      0.0045977              2            3.5           1392
              0.5     0.00111111              0              1              1              2
              0.5      0.0177778      0.0126437              4              4           1354
              0.5      0.0122222     0.00804598              2            5.5           1039
              0.5      0.0222222      0.0155172              6        3.33333           1503
              0.5     0.00888889     0.00574713              2              4           1926
];

rows = size(data, 1);
cols = size(data, 2);

Latency = [];
for i = 1:rows/20,
   ifirst = (i - 1) * 20 + 1;
   ilast  = ifirst + 20 - 1;
   tmp = data(ifirst:ilast, cols-5+5);
   avg = mean(tmp);
   [h sig ci] = ttest(tmp, 0.1);
   ci = (ci(2)-ci(1))/2;
   Latency = [Latency; data(ifirst, 1:cols-5), avg ci];
end

figure(1);
hold on;
title('Impact of Size and Defects on Latency')
plot(Latency(:,1), Latency(:,2), symbol);
xlabel('Node Defect Rate')
ylabel('Latency')
