% fname: out_matlab/set1_30x30.m
% ../nanoxim -dimx 30 -dimy 30  -disr -cyclelinks 3 -bootstrap center -bootstrap_immunity -bootstrap_timeout 900 

function [node_coverage, link_coverage, nsegments, avg_seg_length] = set1_30x30(symbol)

data = [
% defective_nodes  node_coverage  link_coverage      nsegments avg_seg_length
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
                0              1              1            339        2.65487
             0.05       0.948889       0.907471            267         3.1985
             0.05       0.935556        0.87931            307        2.74267
             0.05       0.943333       0.888506            259        3.27799
             0.05       0.957778        0.91954            259        3.32819
             0.05       0.945556       0.897126            286        2.97552
             0.05       0.938889       0.894253            277        3.05054
             0.05       0.942222       0.885632            263        3.22433
             0.05       0.928889       0.864943            242        3.45455
             0.05       0.957778        0.91954            349        2.46991
             0.05       0.947778       0.901724            315        2.70794
             0.05       0.948889       0.904598            310        2.75484
             0.05       0.938889       0.884483            246        3.43496
             0.05       0.952222       0.903448            289         2.9654
             0.05       0.948889       0.902874            315        2.71111
             0.05           0.94        0.89023            284        2.97887
             0.05       0.872222       0.832184            260        3.01923
             0.05       0.941111       0.886782            234        3.61966
             0.05       0.952222       0.904598            272        3.15074
             0.05       0.943333       0.904598            261        3.25287
             0.05       0.944444       0.898276            289        2.94118
              0.1       0.902222       0.829885            252        3.22222
              0.1       0.881111       0.786782            251        3.15936
              0.1       0.898889       0.822414            278        2.91007
              0.1       0.891111       0.814943            297        2.70034
              0.1       0.886667       0.793678            286        2.79021
              0.1           0.87       0.772989            259        3.02317
              0.1       0.877778       0.797126            247        3.19838
              0.1           0.87       0.779885            239        3.27615
              0.1       0.893333       0.808046            231        3.48052
              0.1       0.887778       0.808621            223        3.58296
              0.1       0.878889       0.790805            234        3.38034
              0.1           0.87       0.785632            262        2.98855
              0.1       0.882222       0.788506            260        3.05385
              0.1       0.887778       0.803448            267        2.99251
              0.1       0.892222       0.808046            238        3.37395
              0.1           0.88       0.782184            265        2.98868
              0.1       0.896667       0.807471            254        3.17717
              0.1       0.885556       0.799425            288        2.76736
              0.1       0.896667        0.81092            266        3.03383
              0.1       0.871111       0.772989            266        2.94737
             0.15       0.798889       0.673563            185        3.88649
             0.15       0.795556       0.664368            194        3.69072
             0.15       0.775556       0.664943            188        3.71277
             0.15       0.832222       0.721264            205        3.65366
             0.15       0.798889       0.681609            201        3.57711
             0.15       0.811111       0.686782            219        3.33333
             0.15       0.824444       0.712069            216        3.43519
             0.15       0.796667       0.687356            238        3.01261
             0.15       0.814444       0.697126            223          3.287
             0.15       0.794444       0.682759            223        3.20628
             0.15       0.797778       0.698276            205        3.50244
             0.15     0.00666667     0.00402299              2              3
             0.15           0.84       0.725287            235        3.21702
             0.15       0.833333       0.716667            209        3.58852
             0.15       0.826667       0.701724            211        3.52607
             0.15       0.784444       0.674138            213        3.31455
             0.15       0.742222       0.641954            198        3.37374
             0.15       0.828889       0.717241            212        3.51887
             0.15       0.805556       0.681034            218        3.32569
             0.15       0.814444       0.686207            222         3.3018
              0.2       0.793333       0.654023            191        3.73822
              0.2       0.727778       0.606322            184        3.55978
              0.2       0.733333       0.598851            200            3.3
              0.2       0.786667        0.67069            199        3.55779
              0.2       0.683333       0.556322            182        3.37912
              0.2       0.762222       0.647126            193         3.5544
              0.2       0.722222       0.591954            191        3.40314
              0.2       0.575556       0.467816            146        3.54795
              0.2      0.0266667      0.0201149              7        3.42857
              0.2       0.782222           0.65            205        3.43415
              0.2           0.79       0.654023            203        3.50246
              0.2       0.745556       0.623563            211        3.18009
              0.2       0.617778       0.506322            163        3.41104
              0.2       0.595556       0.499425            158        3.39241
              0.2       0.761111        0.61954            210         3.2619
              0.2       0.756667       0.622989            170        4.00588
              0.2       0.804444       0.682759            223        3.24664
              0.2       0.391111       0.325287            111        3.17117
              0.2            0.7       0.565517            176        3.57955
              0.2       0.757778       0.627586            185        3.68649
             0.25       0.398889       0.305747            100           3.59
             0.25       0.561111       0.442529            133        3.79699
             0.25       0.522222       0.412644            142        3.30986
             0.25           0.07      0.0528736             18            3.5
             0.25       0.641111       0.502299            143        4.03497
             0.25       0.583333       0.462644            148         3.5473
             0.25       0.115556      0.0867816             31        3.35484
             0.25           0.58       0.451149            148        3.52703
             0.25       0.644444       0.513218            148        3.91892
             0.25       0.531111       0.416092            125          3.824
             0.25     0.00888889     0.00574713              2              4
             0.25       0.608889       0.481034            140        3.91429
             0.25       0.613333       0.478736            155        3.56129
             0.25       0.531111       0.412069            133        3.59398
             0.25       0.591111       0.455747            136        3.91176
             0.25       0.512222       0.411494            124        3.71774
             0.25       0.673333       0.538506            162        3.74074
             0.25       0.648889       0.529885            163        3.58282
             0.25       0.665556        0.52069            185        3.23784
             0.25       0.614444       0.475287            155        3.56774
              0.3           0.47       0.352874            104        4.06731
              0.3       0.253333       0.197126             71        3.21127
              0.3       0.504444       0.383908            127         3.5748
              0.3      0.0944444      0.0683908             24        3.54167
              0.3       0.237778       0.182184             57        3.75439
              0.3       0.267778            0.2             68        3.54412
              0.3           0.19       0.144253             48         3.5625
              0.3       0.147778       0.108046             39        3.41026
              0.3       0.182222       0.141379             48        3.41667
              0.3       0.101111      0.0770115             27        3.37037
              0.3       0.103333      0.0770115             21        4.42857
              0.3      0.0977778      0.0741379             24        3.66667
              0.3      0.0166667       0.012069              6            2.5
              0.3       0.295556       0.222989             61        4.36066
              0.3           0.48        0.36092            108              4
              0.3       0.237778       0.183333             58        3.68966
              0.3      0.0122222     0.00862069              4           2.75
              0.3       0.377778       0.285632             91        3.73626
              0.3       0.216667       0.159195             54        3.61111
              0.3      0.0711111      0.0494253             16              4
             0.35           0.36       0.261494             89        3.64045
             0.35      0.0255556      0.0183908              8          2.875
             0.35           0.44       0.336782            111        3.56757
             0.35      0.0688889      0.0465517             10            6.2
             0.35      0.0522222      0.0373563             14        3.35714
             0.35      0.0977778      0.0735632             23        3.82609
             0.35       0.192222        0.13908             44        3.93182
             0.35       0.107778      0.0781609             24        4.04167
             0.35       0.197778       0.143678             46        3.86957
             0.35      0.0544444      0.0408046             12        4.08333
             0.35       0.117778       0.087931             25           4.24
             0.35       0.108889      0.0752874             22        4.45455
             0.35       0.136667       0.101149             38        3.23684
             0.35       0.275556       0.203448             67        3.70149
             0.35      0.0333333      0.0264368             12            2.5
             0.35      0.0422222      0.0321839             10            3.8
             0.35      0.0188889      0.0143678              5            3.4
             0.35      0.0566667       0.041954             10            5.1
             0.35      0.0411111      0.0298851              9        4.11111
             0.35      0.0966667      0.0735632             27        3.22222
              0.4           0.01     0.00632184              1              9
              0.4      0.0855556      0.0603448             14            5.5
              0.4           0.08      0.0574713             16            4.5
              0.4       0.103333      0.0718391             18        5.16667
              0.4      0.0255556      0.0195402              7        3.28571
              0.4      0.0166667      0.0109195              4           3.75
              0.4      0.0133333      0.0091954              3              4
              0.4      0.0155556      0.0109195              3        4.66667
              0.4       0.164444       0.113218             34        4.35294
              0.4      0.0266667      0.0195402              8              3
              0.4     0.00777778      0.0045977              1              7
              0.4     0.00777778      0.0045977              1              7
              0.4      0.0822222      0.0632184             16          4.625
              0.4     0.00444444     0.00229885              1              4
              0.4           0.13      0.0913793             28        4.17857
              0.4           0.01     0.00632184              2            4.5
              0.4      0.0155556      0.0103448              4            3.5
              0.4     0.00666667     0.00402299              1              6
              0.4      0.0344444      0.0264368              9        3.44444
              0.4      0.0377778      0.0241379              6        5.66667
             0.45      0.0388889      0.0293103             10            3.5
             0.45      0.0466667      0.0310345             12            3.5
             0.45     0.00777778      0.0045977              1              7
             0.45      0.0222222      0.0149425              4              5
             0.45     0.00666667     0.00402299              2              3
             0.45      0.0255556      0.0189655              8          2.875
             0.45       0.133333      0.0902299             22        5.45455
             0.45      0.0833333      0.0557471             18        4.16667
             0.45      0.0255556      0.0183908              7        3.28571
             0.45      0.0555556      0.0367816             12        4.16667
             0.45           0.02      0.0143678              6              3
             0.45     0.00666667     0.00402299              1              6
             0.45           0.01     0.00689655              3              3
             0.45      0.0555556      0.0367816             11        4.54545
             0.45           0.07      0.0517241             17        3.70588
             0.45      0.0155556      0.0109195              3        4.66667
             0.45      0.0488889      0.0327586             10            4.4
             0.45      0.0111111     0.00689655              2              5
             0.45     0.00666667     0.00402299              1              6
             0.45     0.00888889      0.0045977              1              8
              0.5           0.02      0.0132184              5            3.6
              0.5      0.0144444      0.0103448              4           3.25
              0.5     0.00444444     0.00229885              1              4
              0.5     0.00444444     0.00229885              1              4
              0.5      0.0111111     0.00747126              3        3.33333
              0.5     0.00666667     0.00402299              1              6
              0.5     0.00444444     0.00229885              1              4
              0.5     0.00777778      0.0045977              1              7
              0.5     0.00888889     0.00574713              3        2.66667
              0.5           0.01     0.00632184              2            4.5
              0.5     0.00444444     0.00229885              1              4
              0.5      0.0133333      0.0091954              2              6
              0.5     0.00444444     0.00229885              1              4
              0.5           0.01     0.00689655              3              3
              0.5      0.0188889      0.0143678              7        2.42857
              0.5     0.00888889     0.00574713              2              4
              0.5      0.0144444     0.00977011              4           3.25
              0.5     0.00666667     0.00402299              2              3
              0.5      0.0133333     0.00977011              5            2.4
              0.5      0.0166667      0.0114943              3              5
];

rows = size(data, 1);
cols = size(data, 2);

node_coverage = [];
for i = 1:rows/20,
   ifirst = (i - 1) * 20 + 1;
   ilast  = ifirst + 20 - 1;
   tmp = data(ifirst:ilast, cols-4+1);
   avg = mean(tmp);
   [h sig ci] = ttest(tmp, 0.1);
   ci = (ci(2)-ci(1))/2;
   node_coverage = [node_coverage; data(ifirst, 1:cols-4), avg ci];
end

figure(1);
hold on;
title('Node Coverage')
plot(node_coverage(:,1), node_coverage(:,2), symbol);
ylim([0 1])
xlabel('Node Defect Rate')
ylabel('node_coverage')
x = [0:0.05:0.5]
y = 1-x
plot(x,y,'--r')
legend('DiSR','Ideal')

